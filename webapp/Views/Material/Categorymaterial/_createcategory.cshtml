
@{
    MaterialSQLindex result = Model;
}

<div class="modal-content">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title" id="headermanuC"> @(result.CategorySQL.category_id == 0 ? "สร้างประเภท" : "แก้ไขประเภท")</h4>
    </div>
    <div class="modal-body">
        <form align="center">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-align-right">
                    <label id="labelCid" class="margin-top-10" hidden>รหัสประเภท</label>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 text-align-left">
                    <input type="hidden" id="inputCid" class="form-control" name="name" value="@result.CategorySQL.category_id" disabled />
                </div>
            </div>
            <div class="row margin-top-10">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-align-right">
                    <label class="margin-top-10">ชื่อกลุ่ม</label>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 text-align-left">
                    <select class="form-control" id="groupC" name="group" @(result.CategorySQL.category_id == 0 ? "" : "disabled") >
                        <option disabled value="0" selected>เลือกกลุ่มวัสดุ</option>
                        @foreach (var item in result.GroupSQLlist)
                        {
                            <option value="@item.group_id"  @(result.CategorySQL.group_id==item.group_id? "selected":"") >@item.group_name</option>
                        }
                    </select>
                </div>
            </div>
            <div class="row margin-top-10">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-align-right">
                    <label class="margin-top-10">ชื่อประเภท</label>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-6 text-align-left">
                    <input type="text" class="form-control" id="insertC" name="insertC" value="@result.CategorySQL.category_name" @(result.CategorySQL.category_id != 0 ? "disabled" : "" ) />
                </div>
            </div>
        </form>

    </div>
    <div class="modal-footer">
        <button type="button" id="createbtn" class="btn-lg btn-success margin-right-5 " style="display:@(result.CategorySQL.category_id == 0 ? "inline" : "none");" onclick="confirmandsaveC()">สร้าง</button>
        <button type="button" id="editbtn" class="btn-lg btn-warning margin-right-5 " style="display:@(result.CategorySQL.category_id != 0 ? "inline" : "none");" onclick="editopen()">แก้ไข</button>
        <button type="button" id="delebtn" class="btn-lg btn-danger margin-right-5 " style="display: @(result.CategorySQL.category_id != 0 ? "inline" : "none");" onclick="confirmanddeleteC()">ลบ</button>
        <button type="button" id="savebtn" class="btn-lg btn-success margin-right-5 " style="display:none;" onclick="confirmandupdateC()">บันทึก</button>
        <button type="button" id="cacelbtn" class="btn-lg btn-danger margin-right-5" style="display:none" onclick="caceledit()">ยกเลิก</button>
        @*<button type="button" class="btn-lg btn-danger margin-right-5" data-dismiss="modal" style="display: @(result.group_id == 0 ? "inline" : "none");">กลับ</button>*@
    </div>
</div>





<script>
    function editopen() {
        document.getElementById("editbtn").style.display = "none";
        document.getElementById("delebtn").style.display = "none";
        document.getElementById("savebtn").style.display = "inline";
        document.getElementById("cacelbtn").style.display = "inline";
        document.getElementById("insertC").disabled = false;
        document.getElementById("inputCid").setAttribute('type', 'text');
        document.getElementById("labelCid").hidden = false;
        document.getElementById("groupC").disabled = false;

    }

    function caceledit() {
        document.getElementById("cacelbtn").style.display = "none"
        document.getElementById("savebtn").style.display = "none";
        document.getElementById("editbtn").style.display = "inline";
        document.getElementById("delebtn").style.display = "inline";
        document.getElementById("insertC").disabled = true;
        document.getElementById("inputCid").setAttribute('type', 'hidden');
        document.getElementById("labelCid").hidden = true;
        document.getElementById("groupC").disabled = true;
    }

    function confirmandsaveC() {
        var inGC = new Object();
        inGC.group_id = document.getElementById("groupC").value;
        inGC.category_name = document.getElementById("insertC").value;
        if (inGC.group_id == "0") {
            alert("โปรดระบุข้อมูลกลุ่ม");
            document.getElementById("groupC").focus();
            return;
        }
        if (inGC.category_name == "") {
            alert("โปรดระบุข้อมูลประเภท");
            document.getElementById("insertC").focus();
            return;
        }
        var headermanu = document.getElementById("headermanuC")
        console.log(headermanu.textContent);
        smartconfirmmessagebox(headermanu.textContent, function () {
            console.log("DO FUNCTION callback");
            createC();
        }
        )
         @*$('#content_ajaxloader').show();
            $.ajax({
                type: "POST",
                url: '@Url.Action("_comfirmcategory", "Material")',
                dataType: 'html',
                data: {},
                success: function (result) {
                    $('#Modal_Content_confirm').html('');
                    $('#Modal_Content_confirm').html(result);
                    $('#Modalconfirm').modal('show');
                    $('#content_ajaxloader').hide();
                }
            });*@
    }

    function confirmandupdateC() {
        var inGC = new Object();
        inGC.category_name = document.getElementById("insertC").value;
        if (inGC.category_name == "") {
            alert("โปรดระบุข้อมูลประเภท");
            document.getElementById("insertC").focus();
            return;
        }
        var headermanu = document.getElementById("headermanuC")
        console.log(headermanu.textContent);
        smartconfirmmessagebox(headermanu.textContent, function () {
            console.log("DO FUNCTION callback");
            updateC();
        });
    }


    function confirmanddeleteC() {
        smartconfirmmessagebox("ลบข้อมูลประเภท", function () {
            console.log("DO FUNCTION callback");
            deleteC();
        });
    }


</script>